/*==============================================================*/
/* DBMS name:      MySQL 5.0                                    */
/* Created on:     2013/8/14 16:09:07                           */
/*==============================================================*/


drop table if exists Relationship_9;

drop table if exists tb_checking_in;

drop table if exists tb_checking_instance;

drop table if exists tb_customer;

drop table if exists tb_depart;

drop table if exists tb_employee;

drop table if exists tb_employee_contracts;

drop table if exists tb_orgen;

drop table if exists tb_permanent_assets;

drop table if exists tb_post;

drop table if exists tb_project;

/*==============================================================*/
/* Table: Relationship_9                                        */
/*==============================================================*/
create table Relationship_9
(
   orgen_id             varchar(32) not null comment '主键id',
   dept_id              varchar(32) not null comment '主键',
   primary key (orgen_id, dept_id)
);

/*==============================================================*/
/* Table: tb_checking_in                                        */
/*==============================================================*/
create table tb_checking_in
(
   checking_id          varchar(32) not null comment '主键id',
   emp_id               varchar(32) comment '主键id',
   stauts               varchar(50) comment '状态',
   reason               varchar(100) comment '原因',
   time                 date comment '时间',
   primary key (checking_id)
);

/*==============================================================*/
/* Table: tb_checking_instance                                  */
/*==============================================================*/
create table tb_checking_instance
(
   emp_id               varchar(32) comment '主键id',
   instance_id          varchar(32),
   emp_name             varchar(100) comment '员工姓名',
   orgen_name           varchar(100),
   emp_due              int,
   emp_actual           int,
   neglect_work         int,
   emp_late             int,
   leave_early          int,
   overtime             int,
   emp_leave            int,
   emp_away             int,
   weekend_overtime     int,
   happenday            date
);

/*==============================================================*/
/* Table: tb_customer                                           */
/*==============================================================*/
create table tb_customer
(
   customer_id          varchar(32) not null comment '主键ID',
   address              varchar(100) comment '地址',
   company_name         varchar(100) comment '公司名称',
   description          varchar(100) comment '描述',
   contact              varchar(50) comment '联系人',
   email                varchar(100) comment '邮箱',
   phone                varchar(20) comment '电话',
   job_place_id         archar(32) comment '收货地址ID',
   primary key (customer_id)
);

alter table tb_customer comment '客户';

/*==============================================================*/
/* Table: tb_depart                                             */
/*==============================================================*/
create table tb_depart
(
   perm_name            varchar(100) comment '员工姓名',
   dept_id              varchar(32) not null comment '主键',
   duty                 varchar(100) comment '职责',
   parent_depart        varchar(50) comment '父级部门',
   primary key (dept_id)
);

alter table tb_depart comment '部门表';

/*==============================================================*/
/* Table: tb_employee                                           */
/*==============================================================*/
create table tb_employee
(
   emp_id               varchar(32) not null comment '主键id',
   orgen_id             varchar(32) comment '主键id',
   post_id              varchar(32) comment '主键',
   identity_card        varchar(18) comment '身份证',
   birthday             date comment '出生年月',
   address              varchar(100) comment '家庭地址',
   orgen_phone          varchar(50) comment '联系电话',
   native_place         varchar(10) comment '籍贯',
   domicile_place       varchar(50) comment '户口所在地',
   graduation_date      date comment '毕业时间',
   graduate_school      varchar(50) comment '毕业学校',
   major                varchar(20) comment '专业',
   education_background varchar(20) comment '学历',
   marry                varchar(20) comment '婚否',
   nation               varchar(20) comment '名族',
   sex                  char(2) comment '性别',
   politics_status      varchar(20) comment '政治面貌',
   dates_employed       date comment '入职时间',
   working_time         date comment '司龄',
   E_mail               varchar(50) comment '邮箱',
   immediate_family     varchar(50) comment '直系亲属',
   status               char(2) comment '状态',
   opening_bank         varchar(50) comment '银行卡开户行',
   card_no              numeric(20,0) comment '银行卡号',
   household_properties char(2) comment '户口性质',
   job_title            varchar(20) comment '职称',
   title_level          varchar(20) comment '职称级别',
   change_jobs          varchar(20) comment '岗位变动',
   social_security_time date comment '社保保险缴费起始月',
   job_no               varchar(20) comment '工号',
   emp_name             varchar(50),
   primary key (emp_id)
);

/*==============================================================*/
/* Table: tb_employee_contracts                                 */
/*==============================================================*/
create table tb_employee_contracts
(
   emp_contract_id      varchar(32) not null comment 'ID',
   emp_id               varchar(32) comment '主键id',
   contract_effective_date date comment '合同生效日期',
   contract_end_date    date comment '合同终止日期',
   contract_date        date comment '合同签订日期',
   status               char(2) comment '状态',
   primary key (emp_contract_id)
);

/*==============================================================*/
/* Table: tb_orgen                                              */
/*==============================================================*/
create table tb_orgen
(
   orgen_id             varchar(32) not null comment '主键id',
   perm_name            varchar(100) comment '员工姓名',
   orgen_phone          varchar(50) comment '联系电话',
   place                varchar(100) comment '地址',
   type                 smallint comment '类型',
   create_time          date comment '成立时间',
   parent_orgen         int comment '上级机构',
   number               varchar(100) comment '资产编号',
   tell_phone           varchar(50) comment '手机号码',
   business_license_no  varchar(100) comment '税务登记证',
   bank_name            varchar(100) comment '开户行名称',
   tax_registration_certificate varchar(100) comment '营业执照',
   primary key (orgen_id)
);

alter table tb_orgen comment '机构表';

/*==============================================================*/
/* Table: tb_permanent_assets                                   */
/*==============================================================*/
create table tb_permanent_assets
(
   perm_id              varchar(32) not null comment '主键',
   emp_id               varchar(32) comment '主键id',
   number               varchar(100) comment '资产编号',
   perm_name            varchar(100) comment '员工姓名',
   acc_type             smallint comment '资产类型',
   state                smallint comment '状态
            1：使用中
            2：损坏
            3：库存',
   buy_time             date comment '购入时间',
   price                double comment '资产价值',
   remark               varchar(100) comment '备注',
   primary key (perm_id)
);

alter table tb_permanent_assets comment '固定资产';

/*==============================================================*/
/* Table: tb_post                                               */
/*==============================================================*/
create table tb_post
(
   post_id              varchar(32) not null comment '主键',
   dept_id              varchar(32) comment '主键',
   post_name            varchar(20) comment '岗位名称',
   post_duty            varchar(50) comment '岗位职责',
   primary key (post_id)
);

/*==============================================================*/
/* Table: tb_project                                            */
/*==============================================================*/
create table tb_project
(
   project_id           varchar(32) not null comment '主键ID',
   create_time          date comment '创建时间',
   description          varchar(100) comment '描述',
   project_name         varchar(50) comment '项目名称',
   user_id              varchar(32) comment '用户ID',
   customer             varchar(32) comment '客户ID',
   primary key (project_id)
);

alter table tb_project comment '项目';

alter table Relationship_9 add constraint FK_Relationship_10 foreign key (dept_id)
      references tb_depart (dept_id) on delete restrict on update restrict;

alter table Relationship_9 add constraint FK_Relationship_9 foreign key (orgen_id)
      references tb_orgen (orgen_id) on delete restrict on update restrict;

alter table tb_checking_in add constraint FK_Relationship_7 foreign key (emp_id)
      references tb_employee (emp_id) on delete restrict on update restrict;

alter table tb_checking_instance add constraint FK_Relationship_12 foreign key (emp_id)
      references tb_employee (emp_id) on delete restrict on update restrict;

alter table tb_employee add constraint FK_Relationship_6 foreign key (post_id)
      references tb_post (post_id) on delete restrict on update restrict;

alter table tb_employee add constraint FK_Relationship_8 foreign key (orgen_id)
      references tb_orgen (orgen_id) on delete restrict on update restrict;

alter table tb_employee_contracts add constraint FK_Relationship_4 foreign key (emp_id)
      references tb_employee (emp_id) on delete restrict on update restrict;

alter table tb_permanent_assets add constraint FK_Relationship_11 foreign key (emp_id)
      references tb_employee (emp_id) on delete restrict on update restrict;

alter table tb_post add constraint FK_Relationship_5 foreign key (dept_id)
      references tb_depart (dept_id) on delete restrict on update restrict;

