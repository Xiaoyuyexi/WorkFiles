<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/j2ee"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="2.4"
	xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee   http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">
	<display-name>Apache-Axis</display-name>
	<distributable/>
	<context-param>
		<param-name>contextConfigLocation</param-name>
		<param-value>/WEB-INF/spring/*.xml</param-value>
	</context-param>

	<servlet>
		<servlet-name>DisplayChart</servlet-name>
		<servlet-class>org.jfree.chart.servlet.DisplayChart</servlet-class>
	</servlet>

	<servlet-mapping>
		<servlet-name>DisplayChart</servlet-name>
		<url-pattern>/servlet/DisplayChart</url-pattern>
	</servlet-mapping>
	
	

	<filter>
		<filter-name>hibernateFilter</filter-name>
		<filter-class>
			org.springframework.orm.hibernate3.support.OpenSessionInViewFilter
		</filter-class>
		<init-param>
			<param-name>singleSession</param-name>
			<param-value>true</param-value>
		</init-param>
	</filter>
	
	<filter-mapping>
		<filter-name>hibernateFilter</filter-name>
		<url-pattern>*.do</url-pattern>
	</filter-mapping>
	<filter-mapping>
		<filter-name>hibernateFilter</filter-name>
		<url-pattern>*.jsp</url-pattern>
	</filter-mapping>
	<filter-mapping>
		<filter-name>hibernateFilter</filter-name>
		<url-pattern>*.jws</url-pattern>
	</filter-mapping>
	<filter-mapping>
		<filter-name>hibernateFilter</filter-name>
		<url-pattern>/services/*</url-pattern>
	</filter-mapping>
	<filter-mapping>
		<filter-name>hibernateFilter</filter-name>
		<url-pattern>/servlet/AxisServlet</url-pattern>
	</filter-mapping>

	<filter>
		<display-name>charsetFilter</display-name>
		<filter-name>charsetFilter</filter-name>
		<filter-class>com.shengdai.kpi.system.SystemFilter</filter-class>
		<init-param>
			<param-name>excludeUrls</param-name>
			<param-value>/detect;*.js;*.jpg;*.htm;*.html;*.gif;*.png;*.css;*.swf;/login.jsp;/login.do;/logout.do;/loginAccredit.do;/500.jsp;/404.jsp;/cache.jsp;/memcache.jsp;performance.jsp;/system_memory_monitor.jsp</param-value>
		</init-param>
	</filter>

	<filter-mapping>
		<filter-name>charsetFilter</filter-name>
		<url-pattern>*.jsp</url-pattern>
	</filter-mapping>
	<filter-mapping>
		<filter-name>charsetFilter</filter-name>
		<url-pattern>*.do</url-pattern>
	</filter-mapping>
	
	<!--<filter>
		<filter-name>logFilter</filter-name>
		<filter-class>com.shengdai.kpi.system.LogFilter</filter-class>
	</filter>
	<filter-mapping>
		<filter-name>logFilter</filter-name>
		<url-pattern>*.jsp</url-pattern>
	</filter-mapping>
	<filter-mapping>
		<filter-name>logFilter</filter-name>
		<url-pattern>*.do</url-pattern>
	</filter-mapping>
	
	
	--><filter>
		<filter-name>performanceFilter</filter-name>
		<filter-class>com.shengdai.kpi.system.PerformanceFilter</filter-class>
	</filter>
	<filter-mapping>
		<filter-name>performanceFilter</filter-name>
		<url-pattern>*.jsp</url-pattern>
	</filter-mapping>
	<filter-mapping>
		<filter-name>performanceFilter</filter-name>
		<url-pattern>*.do</url-pattern>
	</filter-mapping>
	
	<listener>
		<listener-class>
			com.shengdai.kpi.system.CommonLoaderListener
		</listener-class>
	</listener>
	
	<listener>
		<listener-class>
			com.shengdai.kpi.system.SystemSessionListener
		</listener-class>
	</listener>
	
	<listener>
		<listener-class>
			org.springframework.web.context.ContextLoaderListener
		</listener-class>
	</listener>

	<listener>
		<listener-class>
			org.apache.axis.transport.http.AxisHTTPSessionListener
		</listener-class>
	</listener>

	<servlet>
		<servlet-name>action</servlet-name>
		<servlet-class>
			org.apache.struts.action.ActionServlet
		</servlet-class>
		<init-param>
			<param-name>config</param-name>
			<param-value>
				/WEB-INF/struts/struts-config.xml,
				/WEB-INF/struts/struts-config-system.xml,
				/WEB-INF/struts/struts-config-flow.xml,
				/WEB-INF/struts/struts-config-common.xml,
				/WEB-INF/struts/struts-config-ass.xml,
				/WEB-INF/struts/struts-config-indicator.xml,
				/WEB-INF/struts/struts-config-ass-config.xml,
				/WEB-INF/struts/struts-config-appeal.xml,
				/WEB-INF/struts/struts-config-yearplan.xml,
			</param-value>
		</init-param>
		<init-param>
			<param-name>debug</param-name>
			<param-value>2</param-value>
		</init-param>
		<load-on-startup>2</load-on-startup>
	</servlet>
	<servlet>
		<servlet-name>jspa</servlet-name>
		<servlet-class>
			com.shengdai.JspaDispatcher
		</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>AxisServlet</servlet-name>
		<servlet-class>
			org.apache.axis.transport.http.AxisServlet
		</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>AdminServlet</servlet-name>
		<servlet-class>
			org.apache.axis.transport.http.AdminServlet
		</servlet-class>
		<load-on-startup>100</load-on-startup>
	</servlet>
	<servlet>
		<servlet-name>SOAPMonitorService</servlet-name>
		<servlet-class>
			org.apache.axis.monitor.SOAPMonitorService
		</servlet-class>
		<init-param>
			<param-name>SOAPMonitorPort</param-name>
			<param-value>5003</param-value>
		</init-param>
		<load-on-startup>100</load-on-startup>
	</servlet>
	<servlet>
		<servlet-name>jsps</servlet-name>
		<servlet-class>
			com.shengdai.NoConJspDispatcher
		</servlet-class>
	</servlet>
	
	<servlet>
    <servlet-name>applicationStart</servlet-name>
    <servlet-class>com.shengdai.kpi.AppStartServlet</servlet-class>
    <load-on-startup>0</load-on-startup>
  </servlet>
	
	<servlet-mapping>
		<servlet-name>jsps</servlet-name>
		<url-pattern>*.jsps</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>action</servlet-name>
		<url-pattern>*.do</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>jspa</servlet-name>
		<url-pattern>*.jspa</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>AxisServlet</servlet-name>
		<url-pattern>/servlet/AxisServlet</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>AxisServlet</servlet-name>
		<url-pattern>*.jws</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>AxisServlet</servlet-name>
		<url-pattern>/services/*</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>SOAPMonitorService</servlet-name>
		<url-pattern>/SOAPMonitor</url-pattern>
	</servlet-mapping>
	<mime-mapping>
		<extension>wsdl</extension>
		<mime-type>text/xml</mime-type>
	</mime-mapping>
	<mime-mapping>
		<extension>xsd</extension>
		<mime-type>text/xml</mime-type>
	</mime-mapping>


	<session-config>
		<session-timeout>60</session-timeout>
	</session-config>

	<welcome-file-list>
		<welcome-file>index.jsp</welcome-file>
	</welcome-file-list>

	<error-page>
		<error-code>404</error-code>
		<location>/404.jsps</location>
	</error-page>
	<error-page>
		<error-code>500</error-code>
		<location>/500.jsps</location>
	</error-page>

	<jsp-config>
		<taglib>
			<taglib-uri>/WEB-INF/tld/struts-html.tld</taglib-uri>
			<taglib-location>
				/WEB-INF/tld/struts-html.tld
			</taglib-location>
		</taglib>
		<taglib>
			<taglib-uri>/WEB-INF/tld/struts-bean.tld</taglib-uri>
			<taglib-location>
				/WEB-INF/tld/struts-bean.tld
			</taglib-location>
		</taglib>
		<taglib>
			<taglib-uri>/WEB-INF/tld/struts-logic.tld</taglib-uri>
			<taglib-location>
				/WEB-INF/tld/struts-logic.tld
			</taglib-location>
		</taglib>
		<taglib>
			<taglib-uri>/WEB-INF/tld/struts-nested.tld</taglib-uri>
			<taglib-location>
				/WEB-INF/tld/struts-nested.tld
			</taglib-location>
		</taglib>
		<taglib>
			<taglib-uri>/WEB-INF/tld/kpi.tld</taglib-uri>
			<taglib-location>/WEB-INF/tld/kpi.tld</taglib-location>
		</taglib>
		<taglib>
			<taglib-uri>/WEB-INF/tld/ln-page-tool.tld</taglib-uri>
			<taglib-location>/WEB-INF/tld/ln-page-tool.tld</taglib-location>
		</taglib>
	</jsp-config>

	<resource-ref>
	  <description>jdbc datasource</description>
	  <res-ref-name>jdbc/kpi</res-ref-name>
	  <res-type>javax.sql.DataSource</res-type>
	  <res-auth>Container</res-auth>
	</resource-ref>
</web-app>

